# 実装計画

- [x] 1. プロジェクト構造とコアインターフェースの設定
  - TypeScriptプロジェクトの初期化とビルド設定
  - 主要インターフェース（MIDIInputManager、GameEngine、UIRenderer等）の定義
  - 基本的なHTMLテンプレートとCanvasエレメントの作成
  - _要件: 1.1, 2.1_

- [x] 2. MIDI入力システムの実装
  - [x] 2.1 MIDIInputManagerクラスの実装
    - Tone.js MIDIオブジェクトを使用したMIDI機器検出と接続
    - ノートオン/オフイベントの処理とコールバック機能
    - _要件: 1.1, 1.2, 1.3_

  - [x] 2.2 MIDI入力とTone.js Transportの同期
    - MIDI入力タイムスタンプをTone.Transport.nowに変換
    - 音程変換機能（Tone.Midi().toFrequency()）の実装
    - _要件: 1.3, 3.1_

  - [x] 2.3 MIDI入力の単体テスト
    - MockMIDIInputを使用したテストケース作成
    - 異なるMIDI機器での動作確認テスト
    - _要件: 1.1, 1.4_

- [ ] 3. Canvas描画システムの実装
  - [x] 3.1 UIRendererクラスの基本実装
    - Canvas初期化とコンテキスト取得
    - 基本的な描画メソッド（矩形、円、テキスト）の実装
    - _要件: 2.1, 2.2_

  - [x] 3.2 音ゲー風ノート表示の実装
    - 落下するノートの描画とアニメーション
    - 鍵盤位置に対応したノート配置システム
    - _要件: 2.2, 2.3_

  - [x] 3.3 アニメーションループとフレーム管理
    - requestAnimationFrameを使用した60FPS描画ループ
    - 差分更新による描画最適化
    - _要件: 2.2, 2.3_

  - [ ] 3.4 UIRenderer単体テスト
    - Canvas描画機能のテストケース
    - アニメーション状態のテスト
    - _要件: 2.1, 2.2_

- [ ] 4. 音楽的タイミングシステムとコンテンツ管理の実装
  - [x] 4.1 音楽的タイミングシステムの実装
    - 四分音符を基準とした相対的タイミング管理
    - BPMベースの実時間変換機能
    - 音楽的単位（四分音符、八分音符、小節等）の定義
    - _要件: 5.1, 5.3_

  - [ ] 4.2 URLパラメータベースのコンテンツ読み込み
    - URLパラメータからJSONコンテンツを読み込み
    - file_urlパラメータでの外部JSONファイル対応
    - コンテンツフォーマットの標準化
    - _要件: 4.1, 4.2_